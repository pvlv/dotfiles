# links:
# https://github.com/gpakosz/.tmux/blob/master/.tmux.conf 
# https://github.com/yardnsm/dotfiles/blob/master/tmux/tmux.conf.symlink
#

# -- Plugins

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'jimeh/tmux-themepack'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-pain-control'

# -- Base

setw -g aggressive-resize on

# Set copy-mode to act more like vim
set -g mode-keys vi
set-option -s set-clipboard off
{{ if eq .YADM_OS "Darwin" }}
  bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "pbcopy"
  bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel "pbcopy" 
{{ else }}
  bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel "xclip -selection clipboard -i"
  bind-key -T copy-mode-vi 'y' send-keys -X copy-pipe-and-cancel "xclip -se c -i" 
{{ end }}
bind-key -T copy-mode-vi 'v' send-keys -X begin-selection
bind-key -T copy-mode-vi Escape send-keys -X cancel

# Mouse
set -g mouse on
bind -r m setw -g mouse on\; display "Mouse ON"
bind -r M setw -g mouse off\; display "Mouse OFF"

# Reload config file
bind r display "Reloading..." \; source-file ~/.tmux.conf \; display "Reloaded!"

# Synchronize all panes
bind y setw synchronize-panes

# Set default name for new windows
bind-key c new-window -n '<unamed>' -c "#{pane_current_path}"

# -- Display 

set -g base-index 1         # start windows numbering at 1
setw -g pane-base-index 1   # make pane numbering consistent with windows

setw -g automatic-rename on # rename window to reflect current program
set -g renumber-windows on  # renumber windows when a window is closed

if '[ -f ~/.tmux.conf.local  ]' 'source ~/.tmux.conf.local'

set-environment -g TMUX_PLUGIN_MANAGER_PATH '~/.tmux/plugins/'
run '~/.tmux/plugins/tpm/tpm'

